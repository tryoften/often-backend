{"version":3,"sources":["app/Services/YouTube/YouTubeService.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;QAAO,cAAc;;4BACG,gBAAgB;;;;sBACH,UAAU;;uBACC,SAAS;;;;;;IAKnD,cAAc;;;;;;;;;AAQP,UARP,cAAc,CAQN,MAAM,EAAE;wBARhB,cAAc;;AAUlB,6BAVI,cAAc,6CAUZ,MAAM,UAhBL,QAAQ,EAgBS;AACxB,MAAI,CAAC,IAAI,GAAG,aAhBL,OAAO,CAgBc;AAC3B,UAAO,EAAG,QAlBJ,QAAQ,CAkBK,QAAQ;GAC3B,CAAC,CAAC;EACH;;WAdI,cAAc;;cAAd,cAAc;;;;;;;;;SAsBT,mBAAC,KAAK,EAAE;;;AAEjB,UAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM,EAAK;;AAEvC,QAAI,OAAO,GAAG,EAAE,CAAC;AACjB,WAAK,IAAI,CAAC,GAAG,CAAC,QAjCR,QAAQ,CAiCS,QAAQ,EAAE;AAChC,UAAK,EAAE;AACN,OAAC,EAAG,KAAK;AACT,SAAG,EAAE,QApCD,QAAQ,CAoCE,OAAO;AACrB,UAAI,EAAG,SAAS;AAChB,UAAI,EAAG,OAAO;MACd;KACD,CAAC,CAAC,EAAE,CAAC,SAAS,EAAE,UAAA,IAAI,EAAI;AACxB,SAAI,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC;AAC9B,SAAI,MAAM,GAAG,EAAE,CAAC;AAChB,UAAK,IAAI,CAAC,IAAI,YAAY,EAAE;AAC3B,YAAM,CAAC,IAAI,CAAC;AACX,SAAE,EAAG,YAAY,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO;AAC/B,WAAI,gBAAgB,YAAY,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,AAAG;AACjD,YAAK,EAAG,YAAY,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK;AACrC,oBAAa,EAAG,YAAY,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY;AACpD,gBAAS,EAAG,YAAY,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,WAAQ,CAAC,GAAG;OAC1D,CAAC,CAAC;MACH;AACD,YAAO,CAAC,MAAM,GAAG,MAAM,CAAC;AACxB,YAAO,CAAC,OAAO,CAAC,CAAC;KACjB,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,UAAA,GAAG,EAAI;AACrB,YAAO,CAAC,GAAG,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC;AACzB,WAAM,CAAC,GAAG,CAAC,CAAC;KACZ,CAAC,CAAC;IACH,CAAC,CAAC;GAEH;;;QAtDI,cAAc;;;qBA2DL,cAAc","file":"app/Services/YouTube/YouTubeService.js","sourcesContent":["import 'backbonefire';\nimport ServiceBase from '../ServiceBase';\nimport { Settings as settings } from './config';\nimport { Service as RestService, parsers } from 'restler';\n\n/** \n * This class is responsible for fetching data from the Giphy API\n */\nclass YouTubeService extends ServiceBase {\n\t\n\t/**\n\t * Initializes the youtube service provider.\n\t * @param {object} models - supporting models\n\t *\n\t * @return {void}\n\t */\n\tconstructor (models) {\n\n\t\tsuper(models, settings);\n\t\tthis.rest = new RestService({\n\t\t\tbaseURL : settings.base_url\n\t\t});\n\t}\n\t\n\t/**\n\t * Main method for obtaining results from the service provider's API.\n\t * @param {object} query - search term\n\t *\n\t * @return {promise} - Promise that when resolved returns the results of the data fetch, or an error upon rejection.\n\t */\n\tfetchData (query) {\n\n\t\treturn new Promise((resolve, reject) => {\n\n\t\t\tvar results = {};\n\t\t\tthis.rest.get(settings.base_url, {\n\t\t\t\tquery: {\n\t\t\t\t\tq : query,\n\t\t\t\t\tkey: settings.api_key,\n\t\t\t\t\tpart : 'snippet',\n\t\t\t\t\ttype : 'video'\n\t\t\t\t}\n\t\t\t}).on('success', data => {\n\t\t\t\tvar videoResults = data.items;\n\t\t\t\tvar videos = [];\n\t\t\t\tfor (let i in videoResults) {\n\t\t\t\t\tvideos.push({\n\t\t\t\t\t\tid : videoResults[i].id.videoId,\n\t\t\t\t\t\tlink : `youtu.be/${ videoResults[i].id.videoId }`,\n\t\t\t\t\t\ttitle : videoResults[i].snippet.title,\n\t\t\t\t\t\tchannel_title : videoResults[i].snippet.channelTitle,\n\t\t\t\t\t\tthumbnail : videoResults[i].snippet.thumbnails.default.url\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tresults.videos = videos;\n\t\t\t\tresolve(results);\n\t\t\t}).on('error', err => {\n\t\t\t\tconsole.log('err' + err);\n\t\t\t\treject(err);\n\t\t\t});\n\t\t});\n\n\t}\n\n\n}\n\nexport default YouTubeService;\n\n"]}